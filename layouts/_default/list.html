{{ define "main" }}
{{- /* SEO optimization for search pages */ -}}
{{- if and (or (eq .Title "所有文章") (eq .Type "posts")) (.Site.Params.seo) -}}
  {{- if .Site.Params.seo.structuredData -}}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SearchResultsPage",
      "name": "{{ .Title }} - {{ .Site.Title }}",
      "description": "{{ .Site.Params.description }}",
      "url": "{{ .Permalink }}",
      "mainEntity": {
        "@type": "ItemList",
        "numberOfItems": {{ len .Pages }},
        "itemListElement": [
          {{- range $index, $page := .Pages -}}
          {{- if gt $index 0 }},{{ end -}}
          {
            "@type": "ListItem",
            "position": {{ add $index 1 }},
            "url": "{{ $page.Permalink }}",
            "name": "{{ $page.Title }}"
          }
          {{- end -}}
        ]
      }
    }
    </script>
  {{- end -}}
{{- end -}}

<div class="list-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{ if or (eq .Title "所有文章") (eq .Type "posts") }}
    <div class="search-container">
      <input type="text" id="search-input" placeholder="输入关键词搜索文章..." />
    </div>
    {{ end }}
  </header>
  <div class="posts-list" id="posts-list">
    {{ $pages := .Pages.GroupByDate "2006-01" }}
    {{ range $pages }}
    <div class="month-group">
      <h3 class="month-title">{{ .Key }}</h3>
      <ul class="post-titles">
        {{ range .Pages }}
        <li>
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
        </li>
        {{ end }}
      </ul>
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
