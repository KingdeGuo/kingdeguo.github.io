<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "zh-CN" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="baidu-site-verification" content="codeva-3HXhhJuJkH" />

  {{ partial "seo.html" . }}

  <link rel="icon" type="image/jpeg" href="/icon.jpg">
  <link rel="search" type="application/opensearchdescription+xml" href="{{ "opensearch.xml" | relURL }}" title="{{ .Site.Title }}">
  <link rel="alternate" type="application/rss+xml" href="{{ "index.xml" | absURL }}" title="{{ .Site.Title }} RSS">

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2370953792797102"
     crossorigin="anonymous"></script>

  <!-- AMP Auto Ads -->
  <script async custom-element="amp-auto-ads"
          src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
  </script>

  <!-- Search Script -->
  {{ if or (eq .Title "所有文章") (eq .Type "posts") }}
  <script src="/js/search.js"></script>
  {{ end }}

  <!-- Styles -->
  {{ $style := resources.Get "css/main.css" }}
  {{ if $style }}
    <link rel="stylesheet" href="{{ $style.RelPermalink }}">
  {{ else }}
    <link rel="stylesheet" href="/css/main.css">
  {{ end }}

  {{ block "structured-data" . }}{{ end }}
  
  {{ partial "analytics.html" . }}
</head>
<body>
  <amp-auto-ads type="adsense"
          data-ad-client="ca-pub-2370953792797102">
  </amp-auto-ads>
  <!-- Header -->
  <header class="site-header">
    <nav class="nav">
      <div class="nav-brand">
        <a href="/">{{ .Site.Title }}</a>
      </div>

      <button class="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <ul class="nav-menu">
        {{ range .Site.Menus.main }}
        <li class="nav-item">
          <a href="{{ .URL | relURL }}" class="nav-link">{{ .Name }}</a>
        </li>
        {{ end }}
        <li class="nav-item">
          <a href="{{ "index.xml" | absURL }}" class="nav-link" target="_blank" rel="noopener">RSS订阅</a>
        </li>
        <li class="nav-item nav-theme-toggle">
          {{ partial "theme-toggle.html" . }}
        </li>
      </ul>
    </nav>
  </header>

  <!-- Main Content with QR Sidebar (always present) -->
  <main class="main">
    <div class="content-wrapper">
      <div class="content-main">
        {{ block "main" . }}{{ end }}
      </div>

      <div class="wechat-qr-sidebar">
        {{ partial "qr.html" . }}
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <p>&copy; {{ now.Format "2006" }} {{ .Site.Params.author }}. All rights reserved.</p>
      <div class="social-links">
        {{ with .Site.Params.github }}
        <a href="https://github.com/{{ . }}" target="_blank" rel="noopener">GitHub</a>
        {{ end }}
        <a href="{{ "index.xml" | absURL }}" target="_blank" rel="noopener">RSS订阅</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  {{ $script := resources.Get "js/main.js" }}
  {{ if $script }}
    <script src="{{ $script.RelPermalink }}"></script>
  {{ else }}
    <script src="/js/main.js"></script>
  {{ end }}

  {{/* comments script moved to single.html to load adjacent to #giscus-comments */}}
</body>
</html>
